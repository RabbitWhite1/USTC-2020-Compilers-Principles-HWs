# HW5-Task1

## 简述1的设计思路

### e1.in

这个文件主要做简单测试, 如加减乘除乘方括号的可用性.

### e2.in

这个文件用于测试复杂组合的正确性. 其中包括但不限于
- 复杂加减乘除括号乘方组合运算
- 验证乘方的结合性
- 验证多重负号的有效性
- 验证了一下类似`-2**2`的东西, 结果为4(这是按照 L-expr 得到的, 按照python应为-4), 这是由于 `UMINUS` 优先级大于 `EXPON` 造成的.

## 简述2的设计思路
只需要在 `expr.lex` 文件加入对 `**` 的识别即可:
```lex
"**"       { debug("**"); yylval.op = "**"; return(EXPON);}
```

## 说明 `make expr` 时各命令产生结果

### 说明结果

- 执行 `make expr` 时, `make` 的部分是 `exp%:` 的部分, `%` 指代 `r`.
- 两个 `mkdir` 命令就是单纯地建立目录
- `$(YACC)...` 一行用以生成 `parser employing`, 其中参数选项解释如下:
    - `-d`: 同时生成`.h`文件, 在 `expr.lex.c` 中会用到.
    - `-r solved`: 产生关于文法和分析器的详细信息
    - `-y`: 仿真 POSIX Yacc.
    - `-b $@`: 指定输出文件的前缀. 这里 `$@` 为 `expr`.
    - `-o $(SRC)/$@.tab.c`: 指定输出目标文件名
    - `$(CONF)/$@.y`: 指定源 `.y` 代码
- `$(LEX)...` 一行用以生成词法分析器. 其中参数解释如下:
    - `-i`: 忽略模式中的大小写
    - `-I`: 生成交互式 `scanner`
    - `-o $(SRC)/expr.lex.c`: 指定输出目标文件名
    - `$(CONF)/$(EXPRLEX).lex`: 指定源 `.lex` 代码
- `$(CC)...` 一行用以编译生成可执行文件.
    - `-DDEBUG`: 定义 `DEBUG` 宏
    - `-o $(BIN)/$@`: 指定输出目标文件名(为 `expr`)
    - `$(SRC)/expr.lex.c $(SRC)/$@.tab.c`: 源程序
    - `-lfl`: 链接到 `fl` 库(flex的)上
    - `-lm`: 链接数学库
    - `-g`: 生成 debug 信息

### 是否可调整顺序

`$(CC)` 的编译必须在最后, 因为需要依赖于前面词法分析和语法分析生成的c代码. 而 `$(YACC)` 和 `$(LEX)` 顺序则无所谓, 因为其相互之间并无依赖.
